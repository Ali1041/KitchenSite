{% load static %}
{% load bootstrap4 %}
{% bootstrap_css %}
{% bootstrap_jquery %}

{% bootstrap_javascript %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="{{ STATIC_URL }}js/jquery.js"></script>

    <script src="https://kit.fontawesome.com/359826513d.js" crossorigin="anonymous"></script>
    <title>Kitchen</title>
    <link rel="stylesheet" href="{% static 'css/navbar.css' %}">
    <link rel="stylesheet" href="{% static 'css/home.css' %}">

</head>
<body>

{# including the top bar #}
{#{% include './inc/navbar.html' with ctx=kitchen %}#}
<div>
    <div class="p-3 bg-light">
    <div class="d-flex justify-content-right">

        <div id="our_info" class="d-flex justify-content-around align-self-center" style="width: 40%">
            <div><i class="fas fa-phone-alt align-self-center"></i>
                <span class="m-0 p-2">08002118289</span></div>


            <div><i class="fas fa-envelope align-self-center"></i>
                <span class="m-0 p-2">customer.service@tkckitchens.co.uk</span></div>



        </div>


        <div id="display_b" class="d-flex justify-content-end align-self-center" style="width: 60%">
            <div id='top-bar' class="align-self-center d-flex justify-content-around" style="width: 40%">
                {% if user.is_superuser %}
                    <a class="a_btn" style="text-decoration: none;color: black;font-weight: 500" href="{% url 'adminPanel:index' %}">Admin Panel</a>
                {% endif %}

                {% if user.is_authenticated %}
                    <a href="{% url 'application:list_wishlist' %}" class="a_btn" style="text-decoration: none;color: black;font-weight: 500">Wishlist</a>
                    <a href="{% url 'application:logout' %}" class="a_btn" style="text-decoration: none;color: black;font-weight: 500">Logout</a>

                {% else %}

                <a href="{% url 'application:login' %}" class="a_btn" style="text-decoration: none;color: black;font-weight: 500">Login</a>
                <a href="{% url 'application:signup' %}" class="a_btn" style="text-decoration: none;color: black;font-weight: 500">Register</a>

                {% endif %}

            </div>

            <div id="search_in" class="d-flex justify-content-center" >
                <form class="m-0 d-flex align-self-center" action="{% url 'application:search' %}" method="POST">
                    {% csrf_token %}
                <input type="text" name="search" placeholder="Search..." class="form-control">
                <button class="btn btn-success">
                    <i class="fas fa-search"></i>
{#                    <img style="position: relative;left: -7%" src="{% static 'Svg/search-solid.svg' %}" height="20px" class="align-self-center" alt="">#}
                </button>
                </form>
            </div>

        </div>


    </div>
</div>

</div>


{# including the navigation bar#}
{% include './inc/navbar2.html' with kitchen=kitchen %}




{% block content %}

    <div >
        <div id="carouselExampleControls" class="carousel slide " data-ride="carousel">
          <div class="carousel-inner">

              <div class="carousel-item active">
              <img class="d-block w-100 img1" style="height: 700px" src="{% static 'imgs/main3.jpg' %}" alt="First slide">
                <div class="carousel-caption">
                    <h4>Welcome to the Home of Premium Kitchens</h4>
                    <p>Combine with a variety of large collection of Kitchen Units and accessories.</p>
                </div>
            </div>


              <div class="carousel-item ">
              <img class="d-block w-100 img1" style="height: 700px" src="{% static 'imgs/main2.jpg' %}" alt="Second slide">
                <div class="carousel-caption">
                    <h4>We transform your Dreams into Reality</h4>
                    <p>Build Complete Kitchens that are Modern and Beautiful.</p>
                </div>
            </div>


              <div class="carousel-item ">
              <img class="d-block w-100 img1" style="height: 700px;" src="{% static 'imgs/main1.jpg' %}" alt="Third slide">
                <div class="carousel-caption">
                    <h4>Build Your Complete Modern and Powerful Kitchens</h4>
                    <p>With us, every step is seamless.</p>
                </div>
            </div>


              <div class="carousel-item ">
              <img class="d-block w-100 img1" style="height: 700px;" src="{% static 'imgs/m1.jpg' %}" alt="Third slide">
                <div class="carousel-caption">
                    <h4>Welcome to the Home of Premium Kitchens</h4>
                    <p>Combine with a variety of large collection of Kitchen Units and accessories.</p>
                </div>
            </div>


              <div class="carousel-item ">
              <img class="d-block w-100 img1" style="height: 700px;" src="{% static 'imgs/m2.jpg' %}" alt="Third slide">
                <div class="carousel-caption">
                    <h4>We transform your Dreams into Reality</h4>
                    <p>Build Complete Kitchens that are Modern and Beautiful.</p>
                </div>
            </div>


              <div class="carousel-item ">
              <img class="d-block w-100 img1" style="height: 700px;" src="{% static 'imgs/m4.jpg' %}" alt="Third slide">
                <div class="carousel-caption">
                    <h4>Build Your Complete Modern and Powerful Kitchens</h4>
                    <p>With us, every step is seamless.</p>
                </div>
            </div>


          </div>
          <a class="carousel-control-prev"  style="color: black!important;" href="#carouselExampleControls" role="button" data-slide="prev">
            <div class="p-3 bg-dark" style="">
                <span class="carousel-control-prev-icon"  style="color: black!important;" aria-hidden="true"></span>
                <span class="sr-only" style="padding: 20px!important;" id="arrow_left">Previous</span>
            </div>
          </a>
          <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <div class="p-3 bg-dark">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </div>
          </a>
        </div>
    </div>




    <div class="text-center p-5 my-4">
        <h2 style="font-weight: 800;color: rgb(46, 154, 135)">WHO ARE WE?</h2>
        <p style="font-weight: 500">We are a British company with Italian inspired furniture. Hassle-free payment over 3 months. </p>
        <p style="font-weight: 500">Nationwide Service and Quick Delivery of stocked items in 7-10 days. We are Committed to producing quality priced kitchens at affordable prices.</p>
        <p style="font-weight: 500">A team that has over 100 years experience. Our Kitchen furniture has been tested and approved by FIRA to reassure our customers of our high-quality kitchens and FSC certified to ensure our products are responsibly sourced.</p>


        <div class="container mx-auto row p-2 my-5 counter" style="">


            <div class="col-lg-3 my-2">
                <div class="card hoverEffect shadow" style="max-width:90%;">
                  <div class="card-body ">
                    <div class="d-flex justify-content-between">
                        <h2 style="font-weight: 800" class="card-title m-0 align-self-center counter-count">436</h2>
                          <i class="far fa-handshake align-self-center" style="font-size: xx-large"></i>
                    </div>
                      <p style="font-weight: 500" class="text-left m-0">Satisfied Clients</p>
                  </div>
                </div>
            </div>


            <div class="col-lg-3 my-2">
                <div class="card hoverEffect shadow" style="max-width:90%;">
                  <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <h2 class="card-title m-0 align-self-center counter-count" style="font-weight: 800">2431</h2>
                          <i class="far fa-handshake align-self-center" style="font-size: xx-large"></i>
                    </div>
                      <p style="font-weight: 500" class="text-left m-0">Design Plans</p>
                  </div>
                </div>

            </div>


            <div class="col-lg-3 my-2">
                <div class="card hoverEffect shadow" style="max-width:90%;">
                  <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div class="d-flex">
                            <h3 style="font-weight: 800" class="card-title m-0 align-self-center counter-count">50</h3>
                            <span class="align-self-center" style="font-size: x-large">+</span>
                        </div>
                          <i class="far fa-handshake align-self-center" style="font-size: xx-large"></i>
                    </div>
                      <p style="font-weight: 500" class="text-left m-0 ">Combine Experience</p>
                  </div>
                </div>

            </div>


            <div class="col-lg-3 my-2">
                <div class="card hoverEffect shadow" style="max-width:90%;">
                  <div class="card-body ">
                    <div class="d-flex justify-content-between">
                        <div class="d-flex">
                            <h3 style="font-weight: 800" class="card-title m-0 align-self-center counter-count">3000</h3>

                            <span class="align-self-center" style="font-size: x-large">+</span>
                        </div>
                          <i class="far fa-handshake align-self-center" style="font-size: xx-large"></i>
                    </div>
                      <p style="font-weight: 500" class="text-left m-0">Completed Projects</p>
                  </div>
                </div>

            </div>
        </div>
    </div>


    <div class="text-center complete-line" style="width: 50%;margin: auto">
        <h4 style="color:rgb(46, 154, 135);font-weight: 800">SERVICES</h4>
        <h2 style="font-weight: 800">What we do</h2>
        <p style="font-weight: 500">We provide UK market with the finest Italian modern and traditional kitchens, created by the world's top architects and designers. We will help you get kitchen which is perfect for you and your family.</p>
        <h2 style="font-weight: 800">What are we</h2>
        <p style="font-weight: 500">We are a British company with Italian inspired furniture. Hassle-free payment over 3 months. Nationwide Service and Quick Delivery of stocked items in 7-10 days. We are Committed to producing quality priced kitchens at affordable prices. A team that has over 100 years experience. Our Kitchen furniture has been tested and approved by FIRA to reassure our customers of our high-quality kitchens and FSC certified to ensure our products are responsibly sourced.</p>

    </div>

    <div class="row text-center my-5 p-3" style="width: 80%;margin: auto">
        <div class="col-lg-3 p-3 hoverEffect border-right d-flex " style="height: 350px">
            <div class="align-self-center ">
                <i class="fas fa-pencil-ruler p-3" style="font-size: xx-large"></i>
            <h2 style="font-weight: 800">Design & Drawing</h2>
            <p style="font-weight: 500">We deliver Kitchen designs that balance style & functionality.</p>
            </div>
        </div>
        <div class="col-lg-3 p-3 hoverEffect border-right d-flex my-2"  style="height: 350px">
            <div class="align-self-center">
                <i class="fas fa-cogs p-3" style="font-size: xx-large"></i>
            <h2 style="font-weight: 800">Installation</h2>
            <p style="font-weight: 500">We carry out full installation services. With us, every step is seamless.</p>
            </div>
        </div>
        <div class="col-lg-3 p-3 hoverEffect border-right d-flex" style="height: 350px">
            <div class="align-self-center">
                <i class="fas fa-truck p-3" style="font-size: xx-large"></i>
                <h2 style="font-weight: 800">Fast Delivery</h2>
                <p style="font-weight: 500">7 to 10 days Nationwide Delivery. Free delivery for orders above £300.</p>
            </div>
        </div>
        <div class="col-lg-3 p-3 hoverEffect border-right d-flex" style="height: 350px">
            <div class="align-self-center">
                <i class="fas fa-money-bill-wave p-3" style="font-size: xx-large"></i>
                <h2 style="font-weight: 800">Easy Payments</h2>
                <p style="font-weight: 500">3 Easy interest-free Instalments through KLARNA</p>
            </div>
        </div>
    </div>



    <div class="container my-5" id="container_remove">


        <h1 style="color: rgb(46, 154, 135);font-weight: 800" class="text-center">Kitchen Styles</h1>
        <h4 class="text-center" style="font-weight: 800">Our Work</h4>
        <div style="width: 60%;margin: auto" id="search_in">
            <div class="d-flex justify-content-around">
                <a style="cursor: pointer;text-decoration: none;color: black;font-weight: 500" class="a_btn" onclick="my_func(event)">View all</a>
                <a style="cursor: pointer;text-decoration: none;color: black;font-weight: 500" class="a_btn" onclick="my_func(event)">Cartmel</a>
                <a style="cursor: pointer;text-decoration: none;color: black;font-weight: 500" class="a_btn" onclick="my_func(event)">Lucent Matt</a>
                <a style="cursor: pointer;text-decoration: none;color: black;font-weight: 500" class="a_btn" onclick="my_func(event)">Oxford</a>
                <a style="cursor: pointer;text-decoration: none;color: black;font-weight: 500" class="a_btn" onclick="my_func(event)">Windsor</a>
            </div>
            <hr/>
        </div>

        <div style="width: 80%;margin: auto" id="search_in">

        {#   custom carosel to be made     #}
        <div id="carouselExampleControls1" class="carousel slide " data-ride="carousel">


          <div class="carousel-inner" id="deleteId">


            <div class="carousel-item active" id="carosel">
              <img class="d-block w-100 " id="k_img" style="height: 400px" loading="lazy" src="https://tkc-static.s3.eu-west-2.amazonaws.com/media/Cambridge_Super-White_Main.jpg" alt="First slide">
            </div>
            <div class="carousel-item">
              <img class="d-block w-100 " id="k_img" loading="lazy" style="height: 400px" src="https://tkc-static.s3.eu-west-2.amazonaws.com/media/Cartmel_Indigo_Cameo_RGB_WEB.jpg" alt="Second slide">
            </div>
            <div class="carousel-item">
              <img class="d-block w-100 " id="k_img" loading="lazy" style="height: 400px" src="https://tkc-static.s3.eu-west-2.amazonaws.com/media/Cartmel-Oak.jpg" alt="Third slide">
            </div>
          </div>
          <a class="carousel-control-prev"   href="#carouselExampleControls1" role="button" data-slide="prev">
            <div class="p-3 bg-dark" style="">
                <span class="carousel-control-prev-icon"  style="color: black!important;" aria-hidden="true"></span>
                <span class="sr-only"  id="arrow_left">Previous</span>
            </div>
          </a>
          <a class="carousel-control-next" href="#carouselExampleControls1" role="button" data-slide="next">
            <div class="p-3 bg-dark">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </div>
          </a>
        </div>

    </div>
    </div>

    <div class="row ml-0 mr-0 mt-5 ">
        <div class="col-md-6 p-0 text-center" style="">
            <video height="380px" width="683px" id="video" controls preload="none" autoplay="false" >
                <source src="{% static 'videos/main.mp4' %}" type="video/mp4">
            </video>
{#            <video src="{% static 'videos/main.mp4' %}" height="674px" width="400px"></video>#}
        </div>
        <div class="col-md-6 p-5 bg-light">
            <h2>Samples</h2>
            <p>
                Due to COVID-19 and for the protection of our team all showroom visits need to be by appointment
                only. Showroom visits are limited to 20-30 minutes. If you require samples, we are happy to post samples free of charge
                . But you have to cover the cost of postage and packaging.
            </p>
        </div>
    </div>

    <div class="my-5 ">
        <div>
            <h4 style="color: rgb(46, 154, 135);font-weight: 800" class="text-center">BLOG</h4>
            <h2 style="font-weight: 800" class="text-center p-3">Latest Blogs</h2>
            <div class="row m-0 justify-content-around menu">
                {% for item in blogs %}
                    <div class="card shadow col-lg-4 p-0 date my-3" id="blog" style="max-width: 27%;">
                        <img src="{{ item.get_photo_url }}" loading="lazy" height="240px" class="card-img-top" alt="">
                        <div class="card-body p-3 d-flex">
                            <div style="height: fit-content;background-color: rgb(46, 154, 135);color: white;border-radius: 4px"
                                 class="p-3 date2 ">
                                <h2 class="m-0">{{ item.timestamp|date:'d' }}</h2>
                                <h5 class="m-0">{{ item.timestamp|date:'M' }}</h5>
                            </div>
                            <div class="p-3">
                                <h2 class="card-title m-0">{{ item.title }}</h2>

                                <p class="m-0">{{ item.text|safe|truncatechars_html:20 }}</p>
                                <a href="{% url 'application:blog-detail' item.pk %}">Read here</a>
                            </div>
                        </div>
                    </div>

                {% endfor %}
            </div>
        </div>
    </div>


{% endblock %}

{# including the footer #}
{% include './inc/footer.html' %}
</body>
<script>
    var url = 'https://wati-integration-service.clare.ai/ShopifyWidget/shopifyWidget.js?27325';
    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = url;
    var options = {
  "enabled":true,
  "chatButtonSetting":{
      "backgroundColor":"#4dc247",
      "ctaText":"",
      "borderRadius":"25",
      "marginLeft":"0",
      "marginBottom":"50",
      "marginRight":"50",
      "position":"right"
  },
  "brandSetting":{
      "brandName":"WATI",
      "brandSubTitle":"Typically replies within a day",
      "brandImg":"https://cdn.clare.ai/wati/images/WATI_logo_square_2.png",
      "welcomeText":"Hi, there!\nHow can I help you?",
      "messageText":"Hello, I have a question about {{page_link}}",
      "backgroundColor":"#0a5f54",
      "ctaText":"Start Chat",
      "borderRadius":"25",
      "autoShow":false,
      "phoneNumber":"923115186000"
  }
};
    s.onload = function() {
        CreateWhatsappChatWidget(options);
    };
    var x = document.getElementsByTagName('script')[0];
    x.parentNode.insertBefore(s, x);
</script>

{% block script %}
<script>
    function search(e){
        function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
        const csrftoken = getCookie('csrftoken');
        const base_url = 'http://127.0.0.1:8000/search/'
        const varData = new FormData()
        varData.append('value',e.target.previousElementSibling.value)
        console.log(e.target.previousElementSibling.value)
        fetch(base_url,{
            method:'POST',
            body:JSON.stringify({'search':e.target.previousElementSibling.value}),
        headers: {'Content-Type':'application/json','X-CSRFToken': csrftoken,'X-Requested-With':'XMLHttpRequest'}
        })
        .then(()=>{
            return
        })
        .then((res)=>{
            return
        })

    }

        function my_func(e){
            let url = [];
            {#const carosel = document.getElementById('carosel')#}
            fetch(`http://127.0.0.1:8000/get-images/${e.target.text}/`)
            .then((res)=>{
                return res.json()
            })
            .then((result)=>{
                const parseResult = JSON.parse(result)
                parseResult.forEach((item)=>{
                    url.push('https://tkckitchens.s3.amazonaws.com/media/'+item.fields.img)

                })
            })
            async function func(){
                await url
                setTimeout(()=>{
                    const toDelete = document.getElementById('deleteId')
                    toDelete.innerHTML=''
                    url.forEach((item,index)=>{
                        const div = document.createElement('div')
                        const img = document.createElement('img')
                        img.src=item
                        if (index===0){
                        div.setAttribute('class','carousel-item active')

                        }
                        else{
                        div.setAttribute('class','carousel-item')

                        }
                        img.setAttribute('class','d-block w-100')
                            img.setAttribute('id','k_img')
                        img.style.height = 400+'px'

                        div.append(img)
                        toDelete.append(div)
                })


                },500)

            }
            func()


    }
$('.counter-count').each(function () {
        $(this).prop('Counter',0).animate({

            Counter: $(this).text()
        },
            {
            duration: 2000,
            easing: 'swing',
            step: function (now) {
                $(this).text(Math.ceil(now));
            }
        });
    });
    function mobile_click(e) {
        const div = document.getElementById('menu_div')
        const upper_div = document.getElementById('animating')
        if (div.style.display === 'block'){
            {#div.style.transition = 'all 2s ease-in-out'#}
            upper_div.setAttribute('class','remove-animating')
            div.style.display='none'

        }
        else{
            {#div.style.transition = 'all 2s ease-in-out'#}
            upper_div.setAttribute('class','animating')
            setTimeout(()=>{
            div.style.display='block'

            },500)
        }

    }
</script>
{% endblock %}

</html>