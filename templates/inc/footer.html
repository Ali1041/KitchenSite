{% load static %}

<div class="bg-dark text-white p-4" id="footer">
    <div class="p-4" id="footer" style="width: 90%;margin: auto">
    <div class="row pb-2 m-0 menu" id="search_in">
        <div class="col-lg-6 align-content-middle" id="search_in">
            <h3 class="m-0 p-2">Signup for our Newsletter</h3>
        </div>

        <div class="col-lg-6 d-flex justify-content-right align-self-center" id="search_in" >
            <input type="email" placeholder="Your Email"  class="form-control" id="search_in" style="width: 50%!important;">
            <button onclick="subscribe(event)" class=" btn btn-success " style="height: 70%">Subscribe</button>
                        <p id="sub" class="ml-2 align-self-center m-0"></p>
        </div>
    </div>
    <hr class="bg-white"/>
    <div class="d-flex justify-content-around menu">
        <div class="">
            <p><i class="fas fa-map-marker-alt"></i><span class="p-2">International House, Mosley Street, Manchester M2 3HZ</span></p>
            <p><i class="fas fa-phone-alt align-self-center"></i><span class="m-0 p-2 my-5">08002118289</span></p>
            <p><i class="fas fa-envelope align-self-center"></i><span class="m-0 p-2">customer.service@tkckitchens.co.uk</span></p>
        </div>
        <div class="align-self-baseline">
            <p>
                <a style="text-decoration: none;color: inherit" href="{% url 'application:terms' %}" class="a_btn mb-2">Terms & conditions</a>
</p>
            <p><a style="text-decoration: none;color: inherit" href="{% url 'application:shippping' %}" class="a_btn mb-2">Shipping and Delivery policy</a></p>
            <p><a class="a_btn" href="{% url 'application:contact' %}" style="text-decoration: none;color: inherit">Customer Service</a>
</p>
            <p><a href="{% url 'application:FAQ' %}" class="a_btn" style="color: inherit;text-decoration: none">FAQs</a></p>
        </div>
        <div class="">
            <p><a href="{% url 'application:return-policy' %}" class="a_btn" style="color: inherit;text-decoration: none">Return & Refund policy</a></p>
            <p><a href="{% url 'application:canel' %}" class="a_btn" style="color: inherit;text-decoration: none">Cancellation policy</a></p>
            <p><a href="{% url 'application:GDPR' %}" class="a_btn" style="color: inherit;text-decoration: none">GDPR policy</a></p>
            <p><a href="{% url 'application:cookies' %}" class="a_btn" style="color: inherit;text-decoration: none">Cookies policy</a></p>
            <p><a href="{% url 'application:intelectual' %}" class="a_btn" style="color: inherit;text-decoration: none">Intellectual property notification</a></p>
            <p><a href="{% url 'application:disclaimer' %}" class="a_btn" style="color: inherit;text-decoration: none">Disclaimer policy</a></p>
        </div>
        <div class="">
            <p><i class="fab fa-facebook-f"></i><span class="pl-2">Facebook</span></p>
            <p><i class="fab fa-pinterest-p"></i><span class="pl-2">Pinterest</span></p>
            <p><i class="fab fa-instagram"></i><span class="pl-2">Instagram</span></p>
        </div>
    </div>
</div>
    <p class="text-center border-top border-bottom m-0 p-3">Copyright&copy;</p>
    <p class="text-center m-0 p-1">All icons are property of <a href="https://fontawesome.com/">Font Awesome</a></p>
</div>
<script>
        function subscribe(e){
            e.preventDefault()
            const email=e.target.previousElementSibling.value
            const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
        function validateEmail(email) {
              const re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
              return re.test(email);
            }

        if (validateEmail(email)){
            const base_url = 'http://127.0.0.1:8000/subscribe/'
            fetch(base_url,{
                method:'POST',
                body:JSON.stringify({'email':e.target.previousElementSibling.value}),
                headers:{
                    'Content-Type':'application/json',
                    'X-CSRFToken':csrftoken
                }
            })
            .then((res)=>{
                return
            })
            .then((result)=>{
                alert('Subscribed successfully')
                e.target.previousElementSibling.value = ''
            })
        }
        else{
                p.innerHTML = 'Try again!!!'
                setTimeout(()=>{
                    p.innerHTML = ''
                },3000)

        }
    }

</script>