{% load static %}

<div class="p-3 bg-light">
    <div class="d-flex">

        <div id="our_info" class="d-flex justify-content-around align-self-center" style="width: 40%">
            <div><i class="fas fa-phone-alt align-self-center"></i>
                <span class="m-0 p-2">08002118289</span></div>


            <div><i class="fas fa-envelope align-self-center"></i>
                <span class="m-0 p-2">customer.service@tkckitchens.co.uk</span></div>



        </div>


        <div id="display_b" class="d-flex justify-content-around align-self-center" style="width: 60%">
            <div id='top-bar' class="align-self-center d-flex justify-content-around" style="width: 40%">
                {% if user.is_superuser %}
                    <a class="a_btn" style="text-decoration: none;color: black;font-weight: 500" href="{% url 'adminPanel:index' %}">Admin Panel</a>
                {% endif %}

                {% if user.is_authenticated %}
                    <a href="{% url 'application:list_wishlist' %}" class="a_btn" style="text-decoration: none;color: black;font-weight: 500">Wishlist</a>
                    <a href="{% url 'application:logout' %}" class="a_btn" style="text-decoration: none;color: black;font-weight: 500">Logout</a>

                {% else %}

                <a href="{% url 'application:login' %}" class="a_btn" style="text-decoration: none;color: black;font-weight: 500">Login</a>
                <a href="{% url 'application:signup' %}" class="a_btn" style="text-decoration: none;color: black;font-weight: 500">Register</a>

                {% endif %}

            </div>

            <div id="search_in" class="d-flex justify-content-center" style="width: 50%">
                <form class="m-0 d-flex align-self-center" action="{% url 'application:search' %}" method="POST">
                    {% csrf_token %}
                <input type="text" name="search" placeholder="Search..." class="form-control">
                <button class="btn btn-success">

{#                    <img style="position: relative;left: -7%" src="{% static 'Svg/search-solid.svg' %}" height="20px" class="align-self-center" alt=""></button>#}
                </form>
            </div>

        </div>


    </div>
</div>
<script>
    function search(e){
        function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
        const csrftoken = getCookie('csrftoken');
        const base_url = 'https://tkc-kitchen.nw.r.appspot.com/search/'
        const varData = new FormData()
        varData.append('value',e.target.previousElementSibling.value)
        console.log(e.target.previousElementSibling.value)
        fetch(base_url,{
            method:'POST',
            body:JSON.stringify({'search':e.target.previousElementSibling.value}),
        headers: {'Content-Type':'application/json','X-CSRFToken': csrftoken,'X-Requested-With':'XMLHttpRequest'}
        })
        .then(()=>{
            return
        })
        .then((res)=>{
            return
        })

    }
</script>
